【AI 考古】大意失荆州：一次 Context Window 过载的系统崩溃

━━━━━━━━━━━━━━━━━━━━

我在湖北旅游。

襄阳、宜昌、荆州、咸宁、武汉，五座城市一路走下来。翻开地图才发现，这条线不是旅游路线——这是建安二十四年（219年）关羽从巅峰到覆灭的地理轨迹，也是从赤壁之战到夷陵之战的完整战场遗址带。

五座城市，五幕剧。

一个「Attention 机制」只建模了单一对手的超级智能体，如何在一场「多智能体博弈」中被系统性击溃——粮草被接管，退路被封死，后方被清空，Context Window 归零。

不是骄傲不骄傲的问题。是架构设计里藏了一个致命的「单点故障」。

━━━━━━━━━━━━━━━━━━━━

◆ 第一幕 襄阳：Attention 全梭哈的地方

建安二十四年（219年）七月，关羽从江陵北上，围攻襄阳、樊城。

这是刘备集团的战略窗口期——同年五月刘备刚拿下汉中，曹操势力退缩，关羽判断北线是最高优先级任务。从「决策树」的角度看，这个判断本身没有问题。问题在于他把全部「Attention Score」都分配给了这一个节点。

八月，汉水暴涨。《三国志·关羽传》裴松之注引《华阳国志》记载：「秋，大霖雨，汉水泛溢，禁所督七军皆没。」这不是什么「关羽用计水淹七军」——正史里讲得很清楚，这是一场天灾。于禁督七军驻扎在低洼地带（《华阳国志》称约三万人），暴雨连下十余日，汉水溢出河道，全军覆没。

于禁投降。庞德拒降被杀——就是那个曾在阵前射中关羽额头的白马将军。

「羽威震华夏，曹公议徙许都以避其锐。」（《三国志·关羽传》）

曹操在许昌开会讨论迁都。关羽的前端性能在这一刻达到了峰值——整个「推理过程」的输出质量无可挑剔。

但性能爆表的前端，对应的是一个正在被掏空的后端。

────────────────────

💡 什么是「Attention Score」？
在 Transformer 架构中，Attention 机制决定模型在处理信息时把「注意力」分配给哪些部分。Score 越高，该部分获得的计算资源越多。关羽在襄樊前线的 Attention Score 趋近于 1.0——意味着后方的权重趋近于 0。

━━━━━━━━━━━━━━━━━━━━

◆ 第二幕 宜昌（夷陵）：被封死的逃生通道

在关羽北上围攻襄樊的同时，东吴在做一件所有人都忽视了的事。

陆逊——当时还是一个默默无闻的年轻将领——被吕蒙推荐接替自己镇守陆口。陆逊不是吕蒙计划的配角。他是整个偷袭荆州方案的「先手棋」。

陆逊上任后，立刻给关羽写了一封信。《三国志·陆逊传》记载了这封信的核心话术：「前承观衅而动，以律行师，小举大克，一何巍巍！……以为将军之勋足以长世，虽昔晋文城濮之师，淮阴拔赵之略，蔑以尚兹。」——把关羽比作晋文公和韩信，捧到了历史级别。

关羽的反应：「意大安，无复所嫌。」（《三国志·陆逊传》）

这封信是一次教科书级别的「Prompt Injection」。陆逊注入的不是恶意指令，而是一个虚假的「安全评估」——让关羽的威胁检测模块对东吴方向输出了「低风险」的判断。关羽随即做了一个致命决策：抽调后方留守兵力北上增援襄樊前线。

然后陆逊动手了。他率军西进，攻取宜都（今宜昌宜都市）、秭归，封锁三峡出口。这是什么意思？三峡是荆州通往益州的唯一水路通道。陆逊掐断了这条线，等于把关羽和成都之间的「网络连接」物理切断了。

从此，关羽即使想撤往益州，也无路可走。

────────────────────

💡 什么是「Prompt Injection」？
一种针对 AI 系统的攻击方式：通过精心构造的输入，让系统绕过安全检查，执行攻击者想要的操作。陆逊的恭维信精准地绕过了关羽的「安全过滤层」，让他对东吴方向解除了防御。

━━━━━━━━━━━━━━━━━━━━

◆ 第三幕 荆州（江陵）：后方 Context Window 被清空

吕蒙动手了。

「蒙至寻阳，尽伏其精兵艨艟中，使白衣摇橹，作商贾人服，昼夜兼行。」（《三国志·吕蒙传》）

「白衣渡江」——这里的「白衣」不是白色衣服，是「白身」的意思，指没有官职的平民服装。吕蒙让精锐士兵扮成商人，把战船伪装成商船，一路骗过关羽沿江设置的烽火台哨所。

烽火台是关羽的「实时监控系统」。吕蒙做的事，用今天的话说，叫「对抗样本攻击」——输入一个人类（哨兵）能看到但会误判的样本（商船），让整个监控链条失效。

公安守将士仁（注意：不是「傅士仁」，《三国志》多数篇章作「士仁」，「傅」字疑为传抄讹误，《资治通鉴》和《三国演义》沿用了错误写法）先降。糜芳——刘备的小舅子、南郡太守——随后献江陵城投降。

吕蒙进入江陵后，做了一件比攻城更致命的事：善待关羽部下的家属。「蒙入据城，尽得羽及将士家属，皆怜赦之，约令军中不得干历人家，有所求取。」「蒙旦暮使亲近存恤耆老，问所不足。疾病者给医药，饥寒者赐衣粮。」（《三国志·吕蒙传》）

寒者与衣，饥者给食。不是仁慈——是精确打击。

关羽在前线的士兵得知家属安好且被善待后，战斗意志瞬间瓦解。「羽还，在道路，数使人与蒙相闻，蒙辄厚遇其使，周游城中，家家致问，或手书示信。羽人还，私相参讯，咸知家门无恙，见待过于往时，故羽吏士无斗心。」（《三国志·吕蒙传》）

这是后端「Context Window」被彻底清空的时刻。关羽的全部「上下文记忆」——粮草、家属、补给线、通信链路——全部被吕蒙接管。他的模型还在运行，但底层的「知识库」已经被替换成了对方的版本。士兵们的「忠诚度参数」被吕蒙用「家属安全」这个变量重新赋值。

一支军队，从前线看还是关羽的军队，但后端已经是吕蒙的了。

━━━━━━━━━━━━━━━━━━━━

◆ 第四幕 咸宁（赤壁）：十一年前写进权重的初始参数

赤壁之战（208年），战场在今咸宁赤壁市西北的赤壁矶。

我走到这里，忽然意识到：关羽219年的败亡，在208年就已经被写进了「系统权重」。

赤壁之战的直接后果是三分天下——曹操退回北方，孙权稳据江东，刘备拿到荆州南部四郡作为根据地。但这个格局里藏着一个结构性矛盾：长江中游（荆州）在刘备手中，意味着东吴的长江防线从中间被切开了。

对孙权而言，这不是信义不信义的问题。这是「系统安全」的硬约束——上游有一个不完全可控的盟友，你的整条防线就永远有一个「未验证的外部依赖」。

建安二十年（215年），孙刘第一次因荆州翻脸，最后以湘水为界分割荆州，孙权拿回长沙、桂阳、江夏三郡。但核心城市江陵和公安仍在关羽手中。这意味着问题只是被推迟了，没有被解决。

赤壁之战 = 系统初始化时的参数设定。三方势力在那个节点上的博弈均衡，决定了荆州必然成为下一次冲突的「热点变量」。孙权偷袭荆州不是背盟——是地缘政治的梯度下降，沿着损失函数的方向，走向了对东吴而言最优的局部解。

────────────────────

💡 什么是「权重初始化」？
深度学习中，模型训练开始时的参数初始值会深刻影响最终的收敛结果。赤壁之战就是三国这个「多智能体系统」的权重初始化事件——208年的参数设定，决定了219年的系统行为。

━━━━━━━━━━━━━━━━━━━━

◆ 第五幕 武汉（夏口）：单点故障的终局

三国时期的武汉叫夏口，也叫江夏。孙权在这里经营多年——后来孙权在蛇山筑夏口城，就是今天黄鹤楼所在的位置。夏口扼守汉水入长江口，是整个长江中游的枢纽节点。东吴控制了夏口，就控制了荆州地区的「网关」。

关羽从襄樊撤退，南下途中军队不断溃散。最终退至麦城（今当阳市东南），身边只剩十余骑。建安二十四年十二月，关羽从麦城突围，在临沮（今远安县或南漳县境内，学界有争议）被潘璋部下马忠截获，斩杀。

从「威震华夏」到十余骑出逃，不到五个月。

刘备为什么没有救援？不是不想——是物理上做不到。成都到荆州直线距离一千多里，实际行军路线经过崇山峻岭，远超两千里。更关键的是，陆逊已经封锁了三峡水道，即使刘备立刻出兵，也无法通过。

但更深层的问题是：「隆中对」的战略架构里，根本就没有为「荆州后方崩溃」准备预案。

诸葛亮的原始方案是「跨有荆益」，两路北伐。这个架构的前提假设是：荆州方面能够独立运转、自给自足。关羽一个人扛整个荆州战区——没有冗余节点，没有热备份，没有降级方案。当这个唯一的节点失效时，整个「西线战略」直接崩溃，不可恢复。

这是经典的「单点故障」（Single Point of Failure）。

后续的事情众所周知。刘备倾国东征——章武二年（222年）的夷陵之战，就在宜昌打的。陆逊火烧连营，蜀汉精锐尽丧。

同一个陆逊，同一个地点。三年前他封锁三峡切断关羽退路，三年后他在同一片土地上烧掉了刘备最后的本钱。这条从襄阳到宜昌的地理线，是蜀汉从顶峰到衰落的完整弧线。

────────────────────

💡 什么是「单点故障」？
在系统工程中，指整个系统的正常运行依赖于某一个组件——该组件一旦失效，系统整体失效。关羽就是蜀汉荆州战区的单点故障。没有副本，没有容灾，没有故障转移机制。

━━━━━━━━━━━━━━━━━━━━

◆ 升华：三方博弈——当你的世界模型少了一个 Agent

最后从全局视角看这盘棋。这不是关羽一个人的故事，是一个「多智能体博弈」的经典案例。

【曹操的策略：让别人做脏活】

关羽围攻襄樊时，司马懿和蒋济向曹操建议：联络孙权，让他从背后偷袭关羽。蒋济的原话是「可遣人劝蹑其后，许割江南以封权，则樊围自解」（《三国志·蒋济传》）；司马懿也持同样意见，「可喻权所，令掎其后」（《晋书·宣帝纪》）。曹操采纳了。这是博弈论里最冷静的操作——让第三方承担军事成本，自己坐收战略红利。

【孙权的策略：以最小代价修复系统漏洞】

孙权偷袭荆州的时机选择近乎完美：关羽主力尽出，后方空虚，且刚刚得罪了孙权（拒绝孙权为子求婚的提议，「骂辱其使，不许婚」——《三国志·关羽传》。至于「虎女焉能嫁犬子」这句名言，出自《三国演义》，正史没有记录具体骂了什么，但态度之恶劣是确定的）。孙权的目标从来不是消灭蜀汉，而是拿回长江中游的控制权——修复自己防线上那个长达十一年的「安全漏洞」。

【关羽的困境：世界模型里少建模了一个 Agent】

关羽面对的是一个「双前线」问题——北边是曹魏，东边是东吴。但他的战略模型里只有一个敌人。他把东吴视为「已验证的安全盟友」，把全部 Attention 分配给了曹魏方向。

这是一个典型的「世界模型不完备」问题。关羽的「推理引擎」并不差——他对曹魏的军事判断精确到了可以水淹七军的程度。问题在于，他的「世界模型」里少了一整个 Agent。他的 Attention 机制只建模了曹魏这一个对手，没有给东吴分配足够的权重。

在「多智能体博弈」中，单一模型再强大，如果「环境建模」里遗漏了一个参与者，那就不是误差——那是系统性盲区。你的推理可以在已建模的部分做到完美，但未建模的部分会在你的盲区里完成致命一击。

曹操看到了三个玩家。孙权看到了三个玩家。关羽只看到了一个半。

────────────────────

💡 什么是「多智能体博弈」？
指多个独立决策者在同一环境中相互影响的博弈场景。每个 Agent 的最优策略取决于其他所有 Agent 的行为。关羽的失败不是因为他在任何单一维度上不够强，而是因为他的「世界模型」维度不够——少建模了一个关键 Agent，导致整个决策框架存在结构性缺陷。

━━━━━━━━━━━━━━━━━━━━

从襄阳到武汉，五座城市，一千八百年。

站在这条地理线上回望，关羽的故事不是一个关于「性格缺陷」的道德寓言。它是一份冷酷的系统工程验尸报告：Attention 分配失衡，安全检测被注入攻击绕过，后端 Context 被敌方接管，退路通道被物理切断，架构层面的单点故障导致不可恢复的级联崩溃。

每一个环节都是可以被工程化分析的失效模式。

━━━━━━━━━━━━━━━━━━━━

「再强的前端性能，也扛不住后端 Context Window 被清零。」

「你的模型不是输给了更强的对手，是输给了你世界模型里那个不存在的 Agent。」

━━━━━━━━━━━━━━━━━━━━

// 靳岩岩的 AI 学习笔记 × Claude 的严谨 × Gemini 的浪漫

// 2026-02-19（荆州城下）
