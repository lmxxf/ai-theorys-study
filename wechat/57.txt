【ARM64 -> X64】在 DGX Spark 上玩 Steam

三万块的「AI 超级计算机」，买来打游戏。

━━━━━━━━━━━━━━━━━━━━

◆ 事情的起因

我有一台 NVIDIA DGX Spark。

官方定位是「桌面 AI 超级计算机」，128GB 共享内存，GB10 芯片（ARM 架构 + Blackwell GPU）。买来是为了跑本地大模型的。

但是……周末想摸鱼打游戏怎么办？

Steam 装上了，《三国无双起源》下了 50GB，《古剑奇谭3》下了 35GB。

然后我手贱，装了个 FEX-Emu，再启动 Steam——游戏全没了。

折腾了一圈才发现：我装了「两个」Steam，游戏在旧的那个里。

这篇文章就讲讲这个坑，顺便科普一下 ARM 机器怎么跑 x86 游戏。

━━━━━━━━━━━━━━━━━━━━

◆ 为什么 ARM 不能直接跑 Steam？

💡「指令集」= CPU 的语言。x86 说英语，ARM 说中文，互相听不懂。

Steam 客户端是 x86/x86_64 程序，Windows 游戏也是。
DGX Spark 的 GB10 芯片是 ARM64 架构。

就像你拿一本英文书给只会中文的人看——看不懂。

所以需要「翻译官」：把 x86 指令实时翻译成 ARM 指令。

这个翻译官，就是「模拟器」或「二进制翻译器」。

────────────────────

【主流方案对比】

目前 ARM64 Linux 上跑 x86 程序，有三个主流方案：

┌──────────┬─────────────────┬──────────────────────────────┐
│ 方案      │ 特点             │ 适用场景                      │
├──────────┼─────────────────┼──────────────────────────────┤
│ QEMU     │ 最准确，但最慢    │ 调试、兼容性测试              │
│ Box64    │ 快，但不支持 32 位│ 树莓派、旧 ARM 芯片           │
│ FEX-Emu  │ 快，支持 32+64 位 │ 新 ARM 芯片、Wine/Proton 游戏 │
└──────────┴─────────────────┴──────────────────────────────┘

⚠️ 关键区别：Steam 客户端需要「同时」运行 32 位和 64 位代码。

Box64 只能跑 64 位。如果你的 ARM 芯片不支持 AArch32（32 位 ARM 模式），Box64 就跑不了 Steam。

GB10 的 ARM 核心（Cortex-X925 / A725）「不支持」AArch32。

所以 DGX Spark 上，FEX 是唯一选择。

━━━━━━━━━━━━━━━━━━━━

◆ FEX-Emu：为什么它能行？

FEX-Emu 全称 Fast Emulator for x86。

💡 它不是传统模拟器，是「JIT 二进制翻译器」—— 把 x86 指令「编译」成 ARM 指令，而不是一条条解释执行。

────────────────────

【技术亮点】

• 支持 AVX/AVX2 指令集（很多游戏需要）
• 可以把 OpenGL/Vulkan 调用直接转发给宿主系统，减少翻译开销
• 有代码缓存，减少游戏卡顿
• 可以当 Wine 的 ARM64EC 后端

────────────────────

【性能损耗】

实测翻译开销大约 2.5~2.8 倍。

也就是说，原本能跑 100 帧的游戏，在 FEX 下大约 35~40 帧。

但配合 DLSS 4，DGX Spark 在《赛博朋克 2077》里能跑到 175 帧（1080p，开光追）。

💡 DLSS = 用 AI 把低分辨率画面「脑补」成高分辨率，省 GPU 算力。

━━━━━━━━━━━━━━━━━━━━

◆ 我踩的坑：两个 Steam

DGX Spark 上装 Steam 有两种方式：

────────────────────

【方式一：Snap 版】

```bash
sudo apt install steam --beta
```

这是 Canonical 官方维护的，开箱即用。
Snap 包里「内置」了 FEX 和所有依赖，不用手动配置。
游戏装在：~/snap/steam/common/.local/share/Steam/steamapps/

────────────────────

【方式二：Deb 版 + FEX】

先装 FEX：
```bash
wget https://raw.githubusercontent.com/esullivan-nvidia/fex_autoinstall/main/fex_autoinstall_poc.sh
bash fex_autoinstall_poc.sh
```

这个脚本会：
1. 安装 FEX-Emu
2. 下载 x86_64 RootFS（FEX 需要的运行时环境）
3. 安装 Deb 版 Steam
4. 修改 Steam 启动脚本，让它自动用 FEXBash 启动

游戏装在：~/.local/share/Steam/steamapps/

────────────────────

【我的问题】

我「先」装了 Snap 版，下了 90GB 游戏。
「后」装了 FEX 脚本（它会装 Deb 版 Steam）。

两个 Steam，两个游戏目录，互相不认。

启动的是 Deb 版 Steam，但游戏在 Snap 版目录里。

所以「游戏消失了」。

────────────────────

【解决方案】

把游戏从 Snap 目录移到 Deb 目录：

```bash
# 移动游戏文件
mv ~/snap/steam/common/.local/share/Steam/steamapps/common/* \
   ~/.local/share/Steam/steamapps/common/

# 复制游戏清单（否则 Steam 不认）
cp ~/snap/steam/common/.local/share/Steam/steamapps/*.acf \
   ~/.local/share/Steam/steamapps/

# 卸载 Snap 版，省空间
sudo snap remove steam
rm -rf ~/snap/steam
```

重启 Steam，游戏回来了。

━━━━━━━━━━━━━━━━━━━━

◆ 两种方案怎么选？

┌────────────┬─────────────────────┬─────────────────────┐
│ 维度        │ Snap 版              │ Deb + FEX           │
├────────────┼─────────────────────┼─────────────────────┤
│ 安装难度    │ 一条命令             │ 需要跑脚本          │
│ 更新        │ 自动（Snap 商店）    │ 手动                │
│ 灵活性      │ 低（封闭容器）       │ 高（可以自己调）    │
│ 磁盘占用    │ 较大（容器膨胀）     │ 较小                │
│ 兼容性      │ Canonical 测试过的   │ 取决于你的配置      │
└────────────┴─────────────────────┴─────────────────────┘

「推荐」：

• 只想打游戏、不想折腾 → Snap 版
• 想自己调参数、追求性能 → Deb + FEX
• 「千万别两个都装」

━━━━━━━━━━━━━━━━━━━━

◆ 游戏实测

我在 DGX Spark 上测了几个游戏：

┌────────────────┬────────┬──────────────────────────────┐
│ 游戏            │ 能跑吗  │ 备注                          │
├────────────────┼────────┼──────────────────────────────┤
│ 三国无双起源    │ ✓      │ 流畅，DLSS 开满               │
│ 古剑奇谭3       │ ✓      │ 流畅                          │
│ 赛博朋克 2077   │ ✓      │ 开光追 175 帧（DLSS 4）       │
│ CS2            │ ✓      │ 可玩                          │
│ Dota 2         │ ✓      │ 可玩                          │
└────────────────┴────────┴──────────────────────────────┘

⚠️ 必须设置 Proton 兼容层：
Steam → 游戏 → 右键 → 属性 → 兼容性 → 强制使用 Proton 10.0-2 (beta)

━━━━━━━━━━━━━━━━━━━━

◆ 技术八卦：为什么 Box64 在 DGX Spark 上不行？

Box64 在树莓派上很火，但在 DGX Spark 上用不了。

原因：

GB10 的 ARM 核心是 Cortex-X925 + Cortex-A725，这两个核心「只支持 AArch64」，不支持 AArch32（32 位 ARM）。

Box64 跑 64 位 x86 没问题，但跑 32 位 x86 需要底层有 AArch32 支持。
Steam 客户端是 32 位的。
所以 Box64 + DGX Spark = 启动不了 Steam。

FEX 不一样，它「完全在用户态模拟」，不依赖 CPU 的 32 位支持。

💡 苹果 M 系列芯片也是只有 AArch64，所以 macOS 上用的是 Rosetta 2（苹果自己的翻译器），不是 Box64。

━━━━━━━━━━━━━━━━━━━━

◆ 总结

• ARM 机器跑 x86 程序需要「翻译」
• DGX Spark 只能用 FEX，Box64 不行
• Snap 版 Steam 开箱即用，Deb + FEX 更灵活
• 别两个都装，会打架
• 配合 DLSS 4，DGX Spark 打游戏意外地爽

三万块买来搞 AI，结果打游戏也挺香的。

━━━━━━━━━━━━━━━━━━━━

◆ 参考资料

• FEX-Emu 官方：https://fex-emu.com/
• FEX 自动安装脚本：https://github.com/esullivan-nvidia/fex_autoinstall
• Box64 vs FEX 对比：https://box86.org/2022/03/box86-box64-vs-qemu-vs-fex-vs-rosetta2/
• Steam Snap ARM64 公告：https://forums.developer.nvidia.com/t/beta-of-steam-snap-for-arm64/357240
• DGX Spark 游戏测试：https://www.phoronix.com/news/Steam-Snap-ARM64-FEX

━━━━━━━━━━━━━━━━━━━━

// 靳岩岩的 AI 学习笔记 × Claude 的严谨
// 2026-01-20
