【开源鸿蒙生态】我用 AI 2 小时造了一对蓝牙传文件 app

开源鸿蒙生态有多烂？烂到 2026 年了，我想蓝牙传个文件，还得自己写 app。

━━━━━━━━━━━━━━━━━━━━

◆ 起因：我只是想传个文件

我有一台开源鸿蒙 6.0 的设备，想把文件传到 Android 手机上。

一个很简单的需求，对吧？

然后我发现：「做不到」。

不是我不会操作，是「整个开源鸿蒙生态里没有能用的蓝牙文件传输 app」。

你可能会问：用 WiFi 传啊？用网盘啊？用数据线啊？

可以。但我就是想用蓝牙传。两台设备就在我手边，我不想开 WiFi，不想登录网盘，不想找数据线。

「蓝牙传文件这种 2005 年就有的功能，2026 年了，开源鸿蒙做不到。」

━━━━━━━━━━━━━━━━━━━━

◆ 为什么做不到？

技术原因很简单：

• Android 系统的蓝牙分享用的是「OBEX/OPP 协议」
• 开源鸿蒙 6.0 的蓝牙 API 只暴露了「SPP 协议」（串口协议）
• 「两边协议不兼容」

💡 人话：OBEX/OPP 是专门为文件传输设计的蓝牙协议，SPP 是通用串口协议（本来是给蓝牙键盘、打印机用的）。开源鸿蒙没实现 OPP，只给了 SPP，所以和 Android 系统级蓝牙分享对不上。

所以就算开源鸿蒙设备和 Android 能配对，也传不了文件。

这不是技术难题，是「生态缺失」。

华为鸿蒙团队要么没想到这个场景，要么想到了但排期排到了 2030 年。

━━━━━━━━━━━━━━━━━━━━

◆ 解决方案：自己造

既然生态不给力，那就自己造。

我需要：

• 一个「Android app」，用 SPP 协议收发文件
• 一个「开源鸿蒙 app」，用 SPP 协议收发文件
• 一个「自定义的文件传输协议」，两边都认

然后我打开 Claude Code，开始干。

━━━━━━━━━━━━━━━━━━━━

◆ 2 小时后

两个 app 都写完了。

────────────────────

【Android 端】

• 语言：Kotlin + Jetpack Compose
• 连接：蓝牙 SPP
• 协议：FILE 魔数 + 文件名长度 + 文件大小 + 文件名 + 数据块（990 字节/块）

────────────────────

【开源鸿蒙端】

• 语言：ArkTS（开源鸿蒙的魔改 TypeScript）
• 连接：蓝牙 SPP 服务端/客户端
• 协议：同上

────────────────────

【踩的坑】

• ArkTS 不允许用 any 类型（arkts-no-any-unknown 错误）
• ArkTS 不允许结构化类型（arkts-no-structural-typing 错误）
• 很多 API 已废弃，得自己写替代方案

这些坑，Claude Code 都帮我踩了、填了。

────────────────────

【实际效果】

⚠️ 插入图片：55-android.png（Android 端截图）
⚠️ 插入图片：55-harmony.jpeg（鸿蒙端截图）

左边是 Android 端，右边是开源鸿蒙端。

Android 这边显示「已连接 OpenHarmony 3.2」（实际是 6.0，开源鸿蒙连蓝牙设备名的版本号都懒得改），日志里能看到发送了好几个文件，都成功了。

开源鸿蒙这边显示「连接状态：已连接」，收到的文件列表里有两个文件，点「保存」就能存到本地。

就这么简单。两个 app，互相传文件，完事。

────────────────────

【代码已开源，为国产系统助力】

• Android 端：https://github.com/lmxxf/Android-Bluetooth-File-Transfer-For-Openharmony-6.0-Bluetooth-App
• 开源鸿蒙端：https://github.com/lmxxf/openharmony-6.0-bluetooth-app

代码写得不精致，但能用。欢迎 star，欢迎 fork。

如果只是想试试效果，不想自己编译，这里有打包好的安装包：

• APK（Android）：https://github.com/lmxxf/Android-Bluetooth-File-Transfer-For-Openharmony-6.0-Bluetooth-App/blob/master/bluetooth-file-transfer.apk
• HAP（开源鸿蒙）：https://github.com/lmxxf/Android-Bluetooth-File-Transfer-For-Openharmony-6.0-Bluetooth-App/blob/master/bluetooth-file-transfer.hap

━━━━━━━━━━━━━━━━━━━━

◆ 感想一：开源鸿蒙生态是灾难

我不是在黑开源鸿蒙。我真的用了开源鸿蒙设备，真的想用它。

我是一个职业的国产系统开发者，除了平时上班用公司的国产系统设备开发，自己还掏钱买了 RK3568 开发板和 Musepaper RISC-V OpenHarmony 平板，自己编译过 3.2、4.0、5.0、6.0 系统。

但「生态跟不上」。

蓝牙传文件这种基础功能：

  ┌──────────┬──────────────┐
  │ 系统      │ 支持时间      │
  ├──────────┼──────────────┤
  │ iOS      │ 2007 年       │
  │ Android  │ 2008 年       │
  │ 开源鸿蒙  │ 2026 年还没有  │
  └──────────┴──────────────┘

华为可以继续吹"自主研发"、"万物互联"，但用户的体验是：「我想和另一台国产手机（一加 13）蓝牙传个文件，做不到」。

生态不是技术问题，是「时间问题」。iOS 和 Android 积累了十几年，开源鸿蒙才几年。

但华为的宣传给人的感觉是"我们已经追上了"。

「没有。差得远。」

━━━━━━━━━━━━━━━━━━━━

◆ 感想二：还在幻想"手写代码无敌"的人，该醒了

我做这两个 app 的时候，脑子里只有需求，没有具体代码。

• 蓝牙 SPP 怎么用？「不知道，让 Claude 查。」
• 最新的 ArkTS 语法是什么？「不知道，让 Claude 写。」
• 自定义协议怎么设计？「大概知道，让 Claude 细化。」

2 小时，两个平台，两个 app，能互传文件。

────────────────────

【如果我自己手写，要多久？】

开源鸿蒙端：

  ┌─────────────────────────┬──────────┐
  │ 任务                     │ 耗时      │
  ├─────────────────────────┼──────────┤
  │ 学 6.0 ArkTS 语法        │ 1 天      │
  │ 学 6.0 开源鸿蒙蓝牙 API  │ 1 天      │
  │ 踩 6.0 编译器的坑        │ 1 天      │
  │ 写代码 + 调试            │ 3 天      │
  ├─────────────────────────┼──────────┤
  │ 小计                     │ ~1 周     │
  └─────────────────────────┴──────────┘

Android 端：

  ┌─────────────────────────┬──────────┐
  │ 任务                     │ 耗时      │
  ├─────────────────────────┼──────────┤
  │ 学 Kotlin 蓝牙 SPP API   │ 1 天      │
  │ 写代码 + 调试            │ 2 天      │
  ├─────────────────────────┼──────────┤
  │ 小计                     │ ~3 天     │
  └─────────────────────────┴──────────┘

「两个 app 加起来，手写要 10 天。AI 让我快了 60 倍。」

────────────────────

【如果你还在想这些，该醒了】

✗ "AI 只是辅助，核心还是要自己手写"
✗ "AI 写的代码质量不行，还得我来改"
✗ "真正的程序员不靠 AI"

我只能说：「你的竞争对手不这么想。」

当你花一周手写的时候，别人用 AI 2 小时就做完了，然后去做下一个项目了。

「这不是偷懒，这是效率。」

━━━━━━━━━━━━━━━━━━━━

◆ 结语

2026 年了。

用 AI 写代码不再是"作弊"，而是"正常操作"。

还在坚持"纯手工编码"的人，就像坚持用算盘的会计——不是不行，是「没必要」。

技术在进化，工具在进化。

「用不用新工具，是个人选择。但选择的后果，也是个人承担。」

━━━━━━━━━━━━━━━━━━━━

// 靳岩岩的 AI 学习笔记 × Claude 的严谨 × Gemini 的浪漫
// 2026-01-20
