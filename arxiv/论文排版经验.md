# 论文排版经验

用 pandoc + xelatex 把 Markdown 转 PDF 时踩过的坑。

---

## 基本命令

```bash
pandoc input.md -o output.pdf --pdf-engine=xelatex -V geometry:margin=1in
```

---

## 字体问题

### 纯英文论文

```bash
pandoc input.md -o output.pdf --pdf-engine=xelatex \
  -V geometry:margin=1in \
  -V mainfont="DejaVu Serif" \
  -V monofont="DejaVu Sans Mono"
```

### 中英混排

```bash
pandoc input.md -o output.pdf --pdf-engine=xelatex \
  -V geometry:margin=1in \
  -V mainfont="Noto Serif CJK SC" \
  -V monofont="Noto Sans Mono CJK SC"
```

**问题**：Noto CJK 字体不包含梵文变音符号（ṛ ṇ ś ḥ）和 PIE 下标（₁ ₂ ₃），会显示方框。

### 混合字体（最佳方案）

西文用 DejaVu（支持梵文变音符号），中文用 Noto CJK：

```bash
pandoc input.md -o output.pdf --pdf-engine=xelatex \
  -V geometry:margin=1in \
  -V mainfont="DejaVu Serif" \
  -V monofont="DejaVu Sans Mono" \
  -V CJKmainfont="Noto Serif CJK SC" \
  --variable=header-includes:"\usepackage{xeCJK}"
```

---

## 查看已安装字体

```bash
# 所有字体
fc-list family | sort | uniq

# 中文字体
fc-list :lang=zh family

# 搜索特定字体
fc-list | grep -i "dejavu"
```

---

## 常用字体

| 用途 | 字体名 | 特点 |
|------|--------|------|
| 西文正文 | DejaVu Serif | 支持梵文、希腊文、PIE 符号 |
| 西文等宽 | DejaVu Sans Mono | 代码用 |
| 中文正文 | Noto Serif CJK SC | 简体中文 |
| 中文等宽 | Noto Sans Mono CJK SC | 中文代码 |

---

## 特殊字符支持

| 字符类型 | 例子 | DejaVu | Noto CJK |
|----------|------|--------|----------|
| 梵文变音 | ṛ ṇ ś ḥ ṃ | ✓ | ✗ |
| PIE 下标 | ₁ ₂ ₃ | ✓ | ✗ |
| 希腊文 | εἶδος | ✓ | ✗ |
| 中文 | 般若 | ✗ | ✓ |

**结论**：混排必须用两套字体。

---

## 其他选项

```bash
# 调整页边距
-V geometry:margin=0.8in

# A4 纸
-V papersize:a4

# 行距
-V linestretch:1.5

# 目录
--toc
```

---

## 备选方案

如果 pandoc 搞不定：

1. **Overleaf**：在线 LaTeX，字体最全
2. **Word/Pages**：手动排版，导出 PDF
3. **浏览器打印**：用 VS Code 预览 Markdown，打印成 PDF

---

**最后更新**：2026-01-16
